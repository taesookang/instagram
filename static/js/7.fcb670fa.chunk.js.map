{"version":3,"sources":["services/firebase.js","components/Header.js","hooks/useUser.js","components/profile/Header.js","components/profile/Photos.js","components/profile/index.js","pages/Profile.js"],"names":["doesUserNameExist","username","a","firebase","firestore","collection","where","toLowerCase","get","result","Boolean","docs","length","getUserByUsername","user","map","item","data","docId","id","getUserByUserID","userId","getSuggestedProfiles","following","limit","filter","profile","includes","updateFollowing","userDocId","profileId","isFollowing","doc","update","FieldValue","arrayRemove","arrayUnion","updateFollowers","profileDocId","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","photosWithUserDetails","getPhotosByUsername","photos","isUserFollowingProfile","currentUserId","profileUserId","response","toggleFollow","Header","useContext","firebaseContext","userContext","className","to","ROUTES","aria-label","src","alt","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","type","title","onClick","auth","signOut","onKeyDown","displayName","useUser","useState","activeUser","setActiveUser","useEffect","getUserObjByUserID","uid","photosCount","followerCount","setFollowerCount","fullName","profileUsername","isFollowingProfile","setIsFollowingProfile","isOwner","isLoggedInUserFollowingProfile","handleToggleFollow","console","log","circle","width","height","fillRule","clipRule","count","Photos","imageSrc","comments","UserProfile","profileOwner","useReducer","state","newState","photosCollection","dispatch","getProfileInfoAndPhotos","Profile","useParams","setProfileOwner","userExists","setUserExists","history","useHistory","push","checkUserExists"],"mappings":"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","file":"static/js/7.fcb670fa.chunk.js","sourcesContent":["import { FieldValue, firebase } from \"../lib/firebase\";\n\nexport async function doesUserNameExist(username) {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"username\", \"==\", username.toLowerCase())\n    .get();\n\n  return Boolean(result.docs.length > 0);\n}\nexport async function getUserByUsername(username) {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"username\", \"==\", username.toLowerCase())\n    .get();\n\n  const user = result.docs.map((item) => ({\n    ...item.data(),\n    docId: item.id,\n  }));\n  return user.length > 0 ? user : false;\n}\n\nexport async function getUserByUserID(userId) {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"userId\", \"==\", userId)\n    .get();\n\n  const user = result.docs.map((item) => ({\n    ...item.data(),\n    docId: item.id,\n  }));\n\n  return user;\n}\n\nexport async function getSuggestedProfiles(userId, following) {\n  const result = await firebase.firestore().collection(\"users\").limit(10).get();\n\n  return result.docs\n    .map((user) => ({ ...user.data(), docId: user.id }))\n    .filter(\n      (profile) =>\n        profile.userId !== userId && !following.includes(profile.userId)\n    );\n}\n\nexport async function updateFollowing(userDocId, profileId, isFollowing) {\n  return await firebase\n    .firestore()\n    .collection(\"users\")\n    .doc(userDocId)\n    .update({\n      following: isFollowing\n        ? FieldValue.arrayRemove(profileId)\n        : FieldValue.arrayUnion(profileId),\n    });\n}\nexport async function updateFollowers(profileDocId, userId, isFollowing) {\n  return await firebase\n    .firestore()\n    .collection(\"users\")\n    .doc(profileDocId)\n    .update({\n      followers: isFollowing\n        ? FieldValue.arrayRemove(userId)\n        : FieldValue.arrayUnion(userId),\n    });\n}\n\nexport async function getPhotos(userId, following) {\n  const result = await firebase\n    .firestore()\n    .collection(\"photos\")\n    .where(\"userId\", \"in\", following)\n    .get();\n\n  const userFollowedPhotos = result.docs.map((photo) => ({\n    ...photo.data(),\n    docId: photo.id,\n  }));\n\n  const photosWithUserDetails = await Promise.all(\n    userFollowedPhotos.map(async (photo) => {\n      let userLikedPhoto = false;\n      if (photo.likes.includes(userId)) {\n        userLikedPhoto = true;\n      }\n      const user = await getUserByUserID(photo.userId);\n      const { username } = user[0];\n      return { username, ...photo, userLikedPhoto };\n    })\n  );\n\n  return photosWithUserDetails;\n}\n\nexport async function getPhotosByUsername(username) {\n  const [user] = await getUserByUsername(username);\n  const result = await firebase\n    .firestore()\n    .collection(\"photos\")\n    .where(\"userId\", \"==\", user.userId)\n    .get();\n\n  const photos = result.docs.map((photo) => ({\n    ...photo.data(),\n    docId: photo.id,\n  }));\n\n  return photos;\n}\n\nexport async function isUserFollowingProfile(currentUserId, profileUserId) {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"userId\", \"==\", currentUserId)\n    .where(\"following\", \"array-contains\", profileUserId)\n    .get();\n\n  const response = result.docs.map((item) => ({\n    ...item.data(),\n    docId: item.id,\n  }));\n\n  return response.length > 0 ? true : false\n}\n\nexport async function toggleFollow(\n  profileDocId,\n  userId,\n  profileId,\n  userDocId,\n  isFollowing\n) {\n  await updateFollowing(userDocId, profileId, isFollowing);\n  await updateFollowers(profileDocId, userId, isFollowing);\n}","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport firebaseContext from \"../context/firebase\";\nimport userContext from \"../context/user\";\nimport * as ROUTES from \"../constants/Routes\";\n\nexport default function Header() {\n  const { firebase } = useContext(firebaseContext);\n  const { user } = useContext(userContext);\n\n  return (\n    <header className=\"bg-white h-16 border-b border-gray-primary mb-8\">\n      <div className=\"container mx-auto max-w-screen-lg h-full\">\n        <div className=\"flex justify-between h-full\">\n          <div className=\"flex items-center cursor-pointer\">\n            <h1 className=\"flex justify-center w-full min-w-max\">\n              <Link to={ROUTES.DASHBOARD} aria-label=\"Instagram logo\">\n                <img\n                  src=\"/images/instagrid.png\"\n                  alt=\"logo\"\n                  className=\"mt-2 w-2/6\"\n                />\n              </Link>\n            </h1>\n          </div>\n          <div className=\"flex text-gray-700 text-center items-center\">\n            {user ? (\n              <>\n                <Link to={ROUTES.DASHBOARD} aria-label=\"Dashboard\">\n                  <svg\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n                    />\n                  </svg>\n                </Link>\n\n                <button\n                  type=\"button\"\n                  title=\"Sign Out\"\n                  onClick={() => firebase.auth().signOut()}\n                  onKeyDown={() => {\n                    firebase.auth().signOut();\n                  }}\n                >\n                  <svg\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n                    />\n                  </svg>\n                </button>\n                <div className=\"flex items-center cursor-pointer min-w-max\">\n                  <Link to={`/p/${user.displayName}`}>\n                    <img\n                      className=\"rounded-full h-10 w-10 flex\"\n                      src={`/images/avatars/taesoo.jpg`}\n                      alt={`${user.displayName} profile`}\n                    />\n                  </Link>\n                </div>\n              </>\n            ) : (\n              <>\n                <Link to={ROUTES.LOGIN}>\n                  <button\n                    type=\"button\"\n                    className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\n                  >\n                    Log In\n                  </button>\n                </Link>\n                <Link to={ROUTES.SIGNUP}>\n                  <button\n                    type=\"button\"\n                    className=\"text-blue-medium font-bold text-sm w-20 h-8\"\n                  >\n                    Sign Up\n                  </button>\n                </Link>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n","import { useState, useEffect, useContext } from 'react'\nimport userContext from '../context/user'\nimport { getUserByUserID } from '../services/firebase'\n\n\nexport default function useUser() {\n    const [activeUser, setActiveUser] = useState({})\n    const { user } = useContext(userContext)\n\n    useEffect(() => {\n        const getUserObjByUserID = async () => {\n            const [response] = await getUserByUserID(user.uid)\n            setActiveUser(response)\n        }\n\n        if (user?.uid) {\n            getUserObjByUserID();\n        }\n    },[user])\n    \n    return { user: activeUser }\n}\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Skeleton from \"react-loading-skeleton\";\nimport useUser from \"../../hooks/useUser\";\nimport { isUserFollowingProfile, toggleFollow } from \"../../services/firebase\";\n\nexport default function Header({\n  photosCount,\n  followerCount,\n  setFollowerCount,\n  profile: {\n    docId: profileDocId,\n    userId: profileUserId,\n    fullName,\n    following,\n    followers,\n    username: profileUsername,\n  },\n}) {\n  const { user } = useUser();\n  const [isFollowingProfile, setIsFollowingProfile] = useState(false);\n  const isOwner =\n    user.username && profileUsername && user.username === profileUsername;\n\n  useEffect(() => {\n    const isLoggedInUserFollowingProfile = async () => {\n      const isFollowing = await isUserFollowingProfile(\n        user.userId,\n        profileUserId\n      );\n      setIsFollowingProfile(isFollowing);\n    };\n\n    if (user?.username && profileUserId) {\n      isLoggedInUserFollowingProfile();\n    }\n  }, [user, profileUserId]);\n\n  const handleToggleFollow = async () => {\n    setFollowerCount({\n      followerCount: isFollowingProfile ? followerCount - 1 : followerCount + 1,\n    });\n\n    await toggleFollow(\n      profileDocId,\n      user.userId,\n      profileUserId,\n      user.docId,\n      isFollowingProfile\n    );\n\n    setIsFollowingProfile((isFollowing) => !isFollowing);\n\n    console.log(\"isFollowing\", isFollowingProfile);\n  };\n\n  return (\n    <div className=\"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\">\n      <div className=\"container flex justify-center\">\n        {profileUsername ? (\n          <div className={` min-w-max ${ isFollowingProfile && \"p-1 bg-gradient-to-tr from-yellow to-red-primary rounded-full\"}`}>\n          <img\n            src={`/images/avatars/${profileUsername}.jpg`}\n            alt={`${profileUsername} profile`}\n            className=\"rounded-full h-40 w-40 flex border-4 border-white\"\n          />\n          </div>\n        ):(\n          <Skeleton circle={true} width={150} height={150}/>\n        )}\n      </div>\n      <div className=\"flex items-center justify-center flex-col col-span-1\">\n        <div className=\"container flex items-center\">\n          <div className=\"flex mr-4 items-center\">\n            <p className=\"text-2xl mr-1\">{profileUsername}</p>\n            {isFollowingProfile && (\n              <div className=\"w-5 h-5 text-blue-medium\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                    clipRule=\"evenodd\"\n                  />\n                </svg>\n              </div>\n            )}\n          </div>\n\n          {isOwner ? null : !isFollowingProfile ? (\n            <button\n              className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\n              type=\"button\"\n              onClick={handleToggleFollow}\n            >\n              Follow\n            </button>\n          ) : (\n            <>\n              <button\n                className=\"border border-gray-primary font-bold text-sm rounded text-black-light w-20 h-8 flex justify-center items-center\"\n                type=\"button\"\n                onClick={handleToggleFollow}\n              >\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                  className=\"w-5\"\n                >\n                  <path d=\"M11 6a3 3 0 11-6 0 3 3 0 016 0zM14 17a6 6 0 00-12 0h12zM13 8a1 1 0 100 2h4a1 1 0 100-2h-4z\" />\n                </svg>\n              </button>\n            </>\n          )}\n        </div>\n        <div className=\"container flex mt-4\">\n          {!followers || !following ? (\n            <Skeleton count={1} width={320} height={48} />\n          ) : (\n            <>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{photosCount}</span> photos\n              </p>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{followerCount}</span>\n                {` `}\n                {followerCount === 1 ? `follower` : `followers`}\n              </p>\n              <p className=\"mr-10\">\n                <span className=\"font-bold\">{following?.length}</span> following\n              </p>\n            </>\n          )}\n        </div>\n        <div className=\"container mt-4\">\n          <p className=\"font-medium\">\n            {!fullName ? <Skeleton count={1} width={100} height={24} /> : fullName}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nHeader.propTypes = {\n  photosCount: PropTypes.number.isRequired,\n  followerCount: PropTypes.number.isRequired,\n  profile: PropTypes.shape({\n    docId: PropTypes.string,\n    userId: PropTypes.string,\n    fullName: PropTypes.string,\n    following: PropTypes.array,\n    followers: PropTypes.array,\n    username: PropTypes.string,\n  }).isRequired,\n  setFollowerCount: PropTypes.func,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Skeleton from \"react-loading-skeleton\";\n\nexport default function Photos({ photos }) {\n  return (\n    <div className=\"h-16 border-t border-gray-primary mt-12 pt-8\">\n      <div className=\"grid grid-cols-3 gap-8 mb-12\">\n        {!photos ? (\n          <Skeleton count={12} width={320} height={400} />\n        ) : photos.length > 0 ? (\n          photos.map((photo) => (\n            <div key={photo.docId} className=\"relative flex group max-h-80 overflow-hidden items-center bg-gray-primary\">\n              <img src={photo.imageSrc} alt={photo.docId} />\n              <div className=\"absolute bottom-0 left-0 bg-gray-200 z-1 w-full justify-evenly items-center h-full bg-black-faded group-hover:flex hidden\">\n                <p className=\"flex items-center text-white font-bold\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                    className=\"w-8 mr-4\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                  {photo.likes.length}\n                </p>\n                <p className=\"flex items-center text-white font-bold\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                    className=\"w-8 mr-4\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                  {photo.comments.length}\n                </p>\n              </div>\n            </div>\n          ))\n        ) : null}\n      </div>\n\n      {!photos || (photos.length === 0 && <p className=\"text-center text-2xl text-gray-primary\"> No Photos Yet</p>  )}\n    </div>\n  );\n}\n\nPhotos.propTypes = {\n  photos: PropTypes.array.isRequired,\n};\n","import React, { useReducer, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Header from \"./Header\";\nimport { getPhotosByUsername } from \"../../services/firebase\";\nimport Photos from \"./Photos\";\n\nexport default function UserProfile({ profileOwner }) {\n  const reducer = (state, newState) => ({ ...state, ...newState });\n  const initialState = {\n    profile: {},\n    photosCollection: [],\n    followerCount: 0,\n  };\n  const [{ profile, photosCollection, followerCount }, dispatch] = useReducer(\n    reducer,\n    initialState\n  );\n\n  useEffect(() => {\n    async function getProfileInfoAndPhotos() {\n      const photos = await getPhotosByUsername(profileOwner.username);\n\n      dispatch({\n        profile: profileOwner,\n        photosCollection: photos,\n        followerCount: profileOwner.followers.length,\n      });\n    }\n\n    \n    getProfileInfoAndPhotos();\n  }, [profileOwner]);\n\n\n  return (\n    <>\n      <Header\n        photosCount={photosCollection ? photosCollection.length : 0}\n        profile={profile}\n        followerCount={followerCount}\n        setFollowerCount={dispatch}\n      />\n      <Photos photos={photosCollection} />\n    </>\n  );\n}\n\nUserProfile.propTypes = {\n  profileOwner: PropTypes.shape({\n    docId: PropTypes.string,\n    userId: PropTypes.string,\n    fullName: PropTypes.string,\n    following: PropTypes.array,\n  }).isRequired,\n};\n","import React, { useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { getUserByUsername } from \"../services/firebase\";\nimport * as ROUTES from \"../constants/Routes\";\nimport Header from \"../components/Header\";\nimport UserProfile from \"../components/profile\"\n\n\nexport default function Profile() {\n  const { username } = useParams();\n  const [profileOwner, setProfileOwner] = useState(null);\n  const [userExists, setUserExists] = useState(false);\n  const history = useHistory();\n\n\n  useEffect(() => {\n    async function checkUserExists() {\n      const user = await getUserByUsername(username);\n      if (user.length > 0) {\n        setProfileOwner(user[0]);\n        setUserExists(true);\n      } else {\n        setUserExists(false);\n        history.push(ROUTES.NOT_FOUND);\n      }\n    }\n\n    checkUserExists();\n}, [username, history]);\n\n\n  return userExists ? (\n    <div className=\"bg-gray-background\">\n        <Header />\n      <div className=\"mx-auto max-w-screen-lg\">\n          <UserProfile profileOwner={profileOwner} />\n      </div>\n    </div>\n  ) : null;\n}\n"],"sourceRoot":""}